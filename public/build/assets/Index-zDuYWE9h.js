import{j as e,H as w,L as i,a as v}from"./app-BxPKJRI6.js";import{A as M,a as D,C,D as P,b as T,c as A,d as L,e as S,f as n}from"./AuthenticatedLayout-DkY2wloE.js";import{u as k,T as F,a as B,b as d,c as H,d as I,e as s,L as R,f as E}from"./table-BTJjPikW.js";import{B as m}from"./button-VSxp6GJN.js";import{I as Q}from"./input-CZjEpvkd.js";import{C as U}from"./ClipLoader-D3pHhLxW.js";import{f as x}from"./format-CBpsKyOP.js";import"./index-kZ6vkZEL.js";import"./useAppUrl-CJ6TiVnT.js";import"./clsx-B-dksMZM.js";const Y=()=>{var c;const{data:r,isLoading:h,searchQuery:f,setSearchQuery:p,currentPage:b,setCurrentPage:u,sortConfig:l,setSortConfig:y,totalPages:j,totalEntries:g}=k({queryKey:"paginate_members",endpoint:"family_members"});console.log(r);const N=[{key:"register_number",label:"Register Number"},{key:"date_of_registration",label:"Date of Registration"},{key:"lastname",label:"Name of Family Member"},{key:"sex",label:"Sex"},{key:"date_birthdate",label:"Place Birthdate"},{key:"",label:"Action"}];console.log("Member Paginate Data:",r);const _=async a=>{if(window.confirm("Are you sure you want to delete this family member?"))try{const o=await v.delete(`/family_members/${a}`);alert(o.data.message),window.location.reload()}catch(o){console.error(o),alert("An unexpected error occurred. Please try again later.")}};return e.jsxs(M,{header:e.jsx("h2",{className:"text-xl font-semibold leading-tight text-gray-800",children:"Family Members"}),children:[e.jsx(w,{title:"Family Members"}),e.jsxs("div",{className:"mx-auto max-w-7xl px-4 mt-5",children:[e.jsx("div",{className:"mb-5 font-semibold",children:e.jsx("h3",{children:"Family Member Section"})}),e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("div",{className:"flex w-full max-w-md",children:e.jsx(Q,{type:"text",placeholder:"Search by lastname...",value:f,onChange:a=>p(a.target.value),className:"w-full p-2 border rounded-md"})}),e.jsx(i,{href:"/family_members/create",children:e.jsxs(m,{className:"ml-4 ",children:[e.jsx(D,{}),"Add Family Member"]})})]}),e.jsx("div",{className:"h-[480px] overflow-y-auto",children:e.jsxs(F,{children:[e.jsx(B,{children:e.jsx(d,{className:"border-2 ",children:N.map(({key:a,label:t})=>e.jsx(H,{className:"cursor-pointer border-2 py-0 px-2",onClick:()=>y({column:a,direction:l.column===a&&l.direction==="asc"?"desc":"asc"}),children:e.jsxs("span",{className:`flex items-center gap-2 ${l.column===a?"text-blue-600 font-semibold":"text-gray-700"}`,children:[e.jsx("span",{className:"text-md font-bold",children:t}),e.jsx(C,{className:"size-4",color:l.column===a?"#2563eb":"currentColor"})]})},a))})}),e.jsxs(I,{children:[h&&e.jsx(d,{children:e.jsx(s,{colSpan:"5",children:e.jsxs("span",{className:"flex flex-col justify-center items-center py-4 text-green-800",children:["fetching data...",e.jsx(U,{color:"#16a34a",size:42})]})})}),(c=r==null?void 0:r.data)==null?void 0:c.map((a,t)=>e.jsxs(d,{className:"border-2",children:[e.jsx(s,{className:"border-2 py-0 px-2",children:a.register_number??""}),e.jsx(s,{className:"border-2 py-0 px-2",children:a.date_of_registration?x(new Date(a.date_of_registration),"dd-MMM-yyyy").toUpperCase():a.date_of_registration??""}),e.jsxs(s,{className:"border-2 py-0 px-2",children:[a.family_member.lastname,","," ",a.family_member.firstname," ",a.family_member.middlename??""]}),e.jsx(s,{className:"border-2 py-0 px-2",children:a.family_member.sex}),e.jsx(s,{className:"border-2 py-0 px-2",children:a.family_member.date_birth?x(new Date(a.family_member.date_birth),"dd-MMM-yyyy").toUpperCase():"n/a"}),e.jsx(s,{className:"border-2 py-0 px-2",children:e.jsxs(P,{children:[e.jsx(T,{children:e.jsx(m,{variant:"ghost",className:"hover:bg-green-200",children:e.jsx(R,{color:"#16a34a"})})}),e.jsxs(A,{children:[e.jsx(L,{children:"Action"}),e.jsx(S,{}),e.jsx(i,{className:"hover:bg-blue-800 hover:rounded hover:text-white",href:route("family_members.show",{id:a.family_member.id}),children:e.jsx(n,{className:"hover:bg-gray-200 cursor-pointer",children:"View Details"})}),e.jsx(i,{className:"hover:bg-blue-800 hover:rounded hover:text-white",href:route("family_members.edit",{id:a.family_member.id}),children:e.jsx(n,{className:"hover:bg-gray-200 cursor-pointer",children:"Edit"})}),e.jsx(n,{onClick:()=>_(a.family_member.id),className:"hover:bg-gray-200 cursor-pointer",children:"Delete"})]})]})})]},t))]})]})}),e.jsxs("div",{className:"mt-5",children:[e.jsxs("span",{className:"text-sm font-medium",children:[" ",`${g} total entries`]}),e.jsx(E,{currentPage:b,setCurrentPage:u,totalPages:j})]})]})]})};export{Y as default};
