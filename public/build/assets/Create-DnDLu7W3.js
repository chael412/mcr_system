import{r as d,u as b,j as e,H as v,L as j,a as y}from"./app-B4qLMadR.js";import{F as l}from"./FormField-EWsi-ele.js";import"./select-Bj_on2pD.js";import{L as c}from"./label-DEV-Y33K.js";import{A as N}from"./AuthenticatedLayout-CMBJZY62.js";import{B as h}from"./button-ltUIwnxF.js";import{I as C}from"./input-Ca3R--1X.js";import"./dialog-Bn-81prb.js";import{S}from"./react-select.esm-QMp6p_dE.js";import{u as F}from"./useAppUrl-CobHGWHt.js";import"./index-CWuTQGZm.js";const G=()=>{const g=F(),[B,L]=d.useState([]),[w,D]=d.useState([]),[A,H]=d.useState(""),[p,f]=d.useState(""),{data:r,setData:s,errors:i,processing:u}=b({register_number:"",date_of_registration:"",firstname:"",middlename:"",lastname:"",sex:"",date_birth:"",place_birth:"",father_name:"",mother_name:"",file:""}),x=a=>{s("file",a.target.files[0])},_=async a=>{var m;a.preventDefault();const t=new FormData;t.append("firstname",r.firstname),t.append("middlename",r.middlename),t.append("lastname",r.lastname),t.append("sex",r.sex),t.append("date_birth",r.date_birth),t.append("place_birth",r.place_birth),t.append("father_name",r.father_name),t.append("mother_name",r.mother_name),t.append("register_number",r.register_number),t.append("date_of_registration",r.date_of_registration),t.append("file",r.file);try{console.log("Sending Payload:",r);const n=await y.post(`${g}/api/store_birthcertificate`,t,{headers:{"Content-Type":"multipart/form-data"}});(n.status===200||n.status===201)&&(alert("Birth certificate record added successfully!"),window.location.reload())}catch(n){console.error("Error saving data:",((m=n.response)==null?void 0:m.data)||n)}},o=[{value:"M",label:"Male"},{value:"F",label:"Female"}];return e.jsxs(N,{header:e.jsx("h2",{className:"text-xl font-semibold leading-tight text-gray-800",children:"Birth Certificates"}),children:[e.jsx(v,{title:"Birth Certificates"}),e.jsx("div",{className:" flex justify-center mb-5",children:e.jsx("div",{className:"border border-gray-400 w-[620px] rounded-md ",children:e.jsxs("form",{onSubmit:_,className:"px-6 py-4 space-y-4",children:[e.jsx("h2",{className:"text-2xl",children:"Add New Birth Certificate"}),e.jsx("hr",{}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:e.jsxs("div",{className:"mt-2",children:[e.jsx(c,{htmlFor:"file",children:"Birth Certificate"}),e.jsx(C,{type:"file",onChange:x})]})}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[e.jsx(l,{id:"regsistry_number",label:"Registry Number",value:r.register_number,onChange:a=>s("register_number",a.target.value),error:i.register_number}),e.jsx(l,{id:"date_of_registration",label:"Date of Registration",type:"date",value:r.date_of_registration,onChange:a=>s("date_of_registration",a.target.value),error:i.date_of_registration})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[e.jsx(l,{id:"firstname",label:"FirstName",value:r.firstname,onChange:a=>s("firstname",a.target.value),error:i.firstname}),e.jsx(l,{id:"middlename",label:"MiddleName",value:r.middlename,onChange:a=>s("middlename",a.target.value),error:i.middlename})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[e.jsx(l,{id:"lastname",label:"LastName",value:r.lastname,onChange:a=>s("lastname",a.target.value),error:i.lastname}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"sex",children:"Sex"}),e.jsx(S,{value:o.find(a=>a.value===p),options:o,onChange:a=>{const t=(a==null?void 0:a.value)||"";f(t),s("sex",t)}})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[e.jsx(l,{id:"date_birth",label:"Date of Birth",type:"date",value:r.date_birth,onChange:a=>s("date_birth",a.target.value),error:i.date_birth}),e.jsx(l,{id:"place_birth",label:"Place of Birth",value:r.place_birth,onChange:a=>s("place_birth",a.target.value),error:i.place_birth})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[e.jsx(l,{id:"father_name",label:"Name of Father",value:r.father_name,onChange:a=>s("father_name",a.target.value),error:i.father_name}),e.jsx(l,{id:"mother_name",label:"Name of Mother",value:r.mother_name,onChange:a=>s("mother_name",a.target.value),error:i.mother_name})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t border-gray-200",children:[e.jsx(j,{href:"/family_members",children:e.jsx(h,{type:"button",variant:"outline",children:"Cancel"})}),e.jsx(h,{type:"submit",disabled:u,className:"px-6 py-2",children:"Save"})]})]})})})]})};export{G as default};
