import{j as e,H as C,L as m,a as D}from"./app-Bg10MVNm.js";import{A as H,a as T,C as A,D as L,b as P,c as M,d as S,e as _,f as x}from"./AuthenticatedLayout-BUXsWuN-.js";import{u as F,T as $,a as B,b as o,c as I,d as k,e as r,L as E,f as Q}from"./table-CJvKvBSf.js";import{B as h}from"./button-Oybj8RJV.js";import{I as z}from"./input-DZlSsPIR.js";import{C as R}from"./ClipLoader-sBa5vYXu.js";import"./index-KNjb7Gjm.js";import"./useAppUrl-DY3KXFhR.js";import"./clsx-B-dksMZM.js";const Y=()=>{var i;const{data:l,isLoading:p,searchQuery:u,setSearchQuery:j,currentPage:y,setCurrentPage:f,sortConfig:t,setSortConfig:b,totalPages:g,totalEntries:N}=F({queryKey:"paginate_heads",endpoint:"family_heads"});console.log(l);const w=[{key:"lastname",label:"Name of Family Head"},{key:"barangay",label:"Barangay"},{key:"municipality",label:"Municipality"},{key:"",label:"Action"}],v=async a=>{var c,d;if(window.confirm("Are you sure you want to delete this family head?"))try{const s=await D.delete(`/family_heads/${a}`);s.status===200?(alert(s.data.message),window.location.reload()):alert("Something went wrong. Please try again later.")}catch(s){console.error(s),(d=(c=s.response)==null?void 0:c.data)!=null&&d.message?alert(s.response.data.message):alert("An unexpected error occurred. Please try again later.")}};return e.jsxs(H,{header:e.jsx("h2",{className:"text-xl font-semibold leading-tight text-gray-800",children:"Family Heads"}),children:[e.jsx(C,{title:"Family Heads"}),e.jsxs("div",{className:"mx-auto max-w-7xl px-4 mt-5",children:[e.jsx("div",{className:"mb-5 font-semibold",children:e.jsx("h3",{children:"Family Head Section"})}),e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("div",{className:"flex w-full max-w-md",children:e.jsx(z,{type:"text",placeholder:"Search by lastname...",value:u,onChange:a=>j(a.target.value),className:"w-full p-2 border rounded-md"})}),e.jsx(m,{href:"/family_heads/create",children:e.jsxs(h,{className:"ml-4 ",children:[e.jsx(T,{}),"Add Family Head"]})})]}),e.jsx("div",{className:"h-[480px] overflow-y-auto",children:e.jsxs($,{children:[e.jsx(B,{children:e.jsx(o,{className:"border-2 ",children:w.map(({key:a,label:n})=>e.jsx(I,{className:"cursor-pointer border-2 py-0 px-2",onClick:()=>b({column:a,direction:t.column===a&&t.direction==="asc"?"desc":"asc"}),children:e.jsxs("span",{className:`flex items-center gap-2 ${t.column===a?"text-blue-600 font-semibold":"text-gray-700"}`,children:[e.jsx("span",{className:"text-md font-bold",children:n}),e.jsx(A,{className:"size-4",color:t.column===a?"#2563eb":"currentColor"})]})},a))})}),e.jsxs(k,{children:[p&&e.jsx(o,{children:e.jsx(r,{colSpan:"5",children:e.jsxs("span",{className:"flex flex-col justify-center items-center py-4 text-green-800",children:["fetching data...",e.jsx(R,{color:"#16a34a",size:42})]})})}),(i=l==null?void 0:l.data)==null?void 0:i.map((a,n)=>e.jsxs(o,{className:"border-2",children:[e.jsx(r,{className:"border-2 py-0 px-2",children:`${a.lastname}, ${a.firstname} ${a.middlename??""}`}),e.jsx(r,{className:"border-2 py-0 px-2",children:a.barangay.barangay_name}),e.jsx(r,{className:"border-2 py-0 px-2",children:a.municipality}),e.jsx(r,{className:"border-2 py-0 px-2",children:a.province}),e.jsx(r,{className:"border-2 py-0 px-2",children:e.jsxs(L,{children:[e.jsx(P,{children:e.jsx(h,{variant:"ghost",className:"hover:bg-green-200",children:e.jsx(E,{color:"#16a34a"})})}),e.jsxs(M,{children:[e.jsx(S,{children:"Action"}),e.jsx(_,{}),e.jsx(m,{className:"hover:bg-blue-800 hover:rounded hover:text-white",href:route("family_heads.edit",{id:a.id}),children:e.jsx(x,{className:"hover:bg-gray-200 cursor-pointer",children:"Edit"})}),e.jsx(x,{onClick:()=>v(a.id),className:"hover:bg-gray-200 cursor-pointer",children:"Delete"})]})]})})]},n))]})]})}),e.jsxs("div",{className:"mt-5",children:[e.jsxs("span",{className:"text-sm font-medium",children:[" ",`${N} total entries`]}),e.jsx(Q,{currentPage:y,setCurrentPage:f,totalPages:g})]})]})]})};export{Y as default};
