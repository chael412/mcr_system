import{r as o,u as j,j as e,H as y,L as N,a as C}from"./app-iuPb_p0T.js";import{F as n}from"./FormField-Bm8sCl_F.js";import"./select-BoTjmzGQ.js";import{L as p}from"./label-Cg_ebJp5.js";import{A as F}from"./AuthenticatedLayout-hjy_bosG.js";import{B as g}from"./button-D8ZVTOSn.js";import{I as S}from"./input-BPXi7sWs.js";import"./dialog-D15BfkAM.js";import{S as M}from"./react-select.esm-CMsDnCaX.js";import{u as L}from"./useAppUrl-CRgjXwUN.js";import"./index-CyClVJfQ.js";const q=({birth:s})=>{const f=L(),u=s.id,[B,w]=o.useState([]),[x,m]=o.useState(""),{data:r,setData:i,errors:l,processing:_}=j({firstname:s.firstname,middlename:s.middlename,lastname:s.lastname,sex:s.sex,date_birth:s.date_birth,place_birth:s.place_birth,father_name:s.father_name,mother_name:s.mother_name,register_number:s.register_number,date_of_registration:s.date_of_registration,file:""});o.useEffect(()=>{m(s.sex||""),i("sex",s.sex||"")},[s.sex]);const c=[{value:"M",label:"Male"},{value:"F",label:"Female"}],b=a=>{i("file",a.target.files[0])},v=async a=>{var h;a.preventDefault();const t=new FormData;t.append("firstname",r.firstname),t.append("middlename",r.middlename),t.append("lastname",r.lastname),t.append("sex",r.sex),t.append("date_birth",r.date_birth),t.append("place_birth",r.place_birth),t.append("father_name",r.father_name),t.append("mother_name",r.mother_name),t.append("register_number",r.register_number),t.append("date_of_registration",r.date_of_registration),t.append("file",r.file);try{const d=await await C.post(`${f}/api/update_birthcertificate/${u}`,t,{headers:{"X-Requested-With":"XMLHttpRequest","Content-Type":"multipart/form-data","X-HTTP-Method-Override":"PUT"}});(d.status===200||d.status===201)&&(alert("BirthCertificate record updated successfully!"),window.location.reload())}catch(d){console.error("Error updating data:",((h=d.response)==null?void 0:h.data)||d)}};return e.jsxs(F,{header:e.jsx("h2",{className:"text-xl font-semibold leading-tight text-gray-800",children:"Family Member"}),children:[e.jsx(y,{title:"Family Members"}),e.jsx("div",{className:" flex justify-center mb-5",children:e.jsx("div",{className:"border border-gray-400 w-[620px] rounded-md ",children:e.jsxs("form",{onSubmit:v,className:"px-6 py-4 space-y-4",children:[e.jsx("h2",{className:"text-2xl",children:"Edit Birth Certificate"}),e.jsx("hr",{}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:e.jsxs("div",{className:"mt-2",children:[e.jsx(p,{htmlFor:"file",children:"Birth Certificate"}),e.jsx(S,{type:"file",onChange:b})]})}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[e.jsx(n,{id:"regsistry_number",label:"Registry Number",value:r.register_number,onChange:a=>i("register_number",a.target.value),error:l.register_number}),e.jsx(n,{id:"date_of_registration",label:"Date of Registration",type:"date",value:r.date_of_registration,onChange:a=>i("date_of_registration",a.target.value),error:l.date_of_registration})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[e.jsx(n,{id:"firstname",label:"FirstName",value:r.firstname,onChange:a=>i("firstname",a.target.value),error:l.firstname}),e.jsx(n,{id:"middlename",label:"MiddleName",value:r.middlename,onChange:a=>i("middlename",a.target.value),error:l.middlename})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[e.jsx(n,{id:"lastname",label:"LastName",value:r.lastname,onChange:a=>i("lastname",a.target.value),error:l.lastname}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"sex",children:"Sex"}),e.jsx(M,{value:c.find(a=>a.value===x),options:c,onChange:a=>{const t=(a==null?void 0:a.value)||"";m(t),i("sex",t)}})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[e.jsx(n,{id:"date_birth",label:"Date of Birth",type:"date",value:r.date_birth,onChange:a=>i("date_birth",a.target.value),error:l.date_birth}),e.jsx(n,{id:"place_birth",label:"Place of Birth",value:r.place_birth,onChange:a=>i("place_birth",a.target.value),error:l.place_birth})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[e.jsx(n,{id:"father_name",label:"Name of Father",value:r.father_name,onChange:a=>i("father_name",a.target.value),error:l.father_name}),e.jsx(n,{id:"mother_name",label:"Name of Mother",value:r.mother_name,onChange:a=>i("mother_name",a.target.value),error:l.mother_name})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t border-gray-200",children:[e.jsx(N,{href:"/birth_certificates",children:e.jsx(g,{type:"button",variant:"outline",children:"Cancel"})}),e.jsx(g,{type:"submit",disabled:_,className:"px-6 py-2",children:"Save"})]})]})})})]})};export{q as default};
