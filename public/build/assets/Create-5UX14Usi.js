import{r as n,u as v,j as e,H as j,L as _,a as y}from"./app-DQX9OVmg.js";import{S as D,F as d}from"./react-select.esm-BQiTxtTb.js";import"./select-DuVJLNYx.js";import{L as c}from"./label-D9D_Y8Mz.js";import{A as N}from"./AuthenticatedLayout-C6bU0PmD.js";import{B as u}from"./button-EnwG9Vp5.js";import{I as S}from"./input-DLoqd4Qu.js";import"./dialog-Bxfu8syX.js";import{u as C}from"./useAppUrl-GuW6x_06.js";import"./index-CWgjLV9q.js";import"./clsx-B-dksMZM.js";const K=()=>{const p=C(),[F,B]=n.useState([]),[A,L]=n.useState([]),[w,H]=n.useState(""),[I,R]=n.useState(""),[g,f]=n.useState(""),{data:t,setData:r,errors:i,processing:h}=v({register_number:"",date_of_registration:"",firstname:"",middlename:"",lastname:"",place_death:"",file:""}),b=a=>{r("file",a.target.files[0])},x=async a=>{var m;a.preventDefault();const s=new FormData;s.append("firstname",t.firstname),s.append("middlename",t.middlename),s.append("lastname",t.lastname),s.append("register_number",t.register_number),s.append("date_of_registration",t.date_of_registration),s.append("place_death",t.place_death),s.append("file",t.file);try{console.log("Sending Payload:",t);const l=await y.post(`${p}/api/store_deathcertificate`,s,{headers:{"Content-Type":"multipart/form-data"}});(l.status===200||l.status===201)&&(alert("Death certificate record added successfully!"),window.location.reload())}catch(l){console.error("Error saving data:",((m=l.response)==null?void 0:m.data)||l)}},o=[{value:"N/A",label:"N/A"},{value:"Bicobian",label:"Bicobian"},{value:"Dibulos",label:"Dibulos"},{value:"Dicambangan",label:"Dicambangan"},{value:"Dicaruyan",label:"Dicaruyan"},{value:"Dicatian",label:"Dicatian"},{value:"Dilakit",label:"Dilakit"},{value:"Dimapnat",label:"Dimapnat"},{value:"Dimapula",label:"Dimapula"},{value:"Dimasalansan",label:"Dimasalansan"},{value:"Dipudo",label:"Dipudo"},{value:"Ditarum",label:"Ditarum"},{value:"Sapinit",label:"Sapinit"}];return e.jsxs(N,{header:e.jsx("h2",{className:"text-xl font-semibold leading-tight text-gray-800",children:"Death Certificates"}),children:[e.jsx(j,{title:"Death Certificates"}),e.jsx("div",{className:" flex justify-center mb-5",children:e.jsx("div",{className:"border border-gray-400 w-[620px] rounded-md ",children:e.jsxs("form",{onSubmit:x,className:"px-6 py-4 space-y-4",children:[e.jsx("h2",{className:"text-2xl",children:"Add New Death Certificate"}),e.jsx("hr",{}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"mt-2",children:[e.jsx(c,{htmlFor:"file",children:"File"}),e.jsx(S,{type:"file",onChange:b})]}),e.jsxs("div",{className:"mt-2",children:[e.jsx(c,{htmlFor:"place_death",children:"Barangay"}),e.jsx(D,{value:o.find(a=>a.value===g),options:o,onChange:a=>{const s=(a==null?void 0:a.value)||"";f(s),r("place_death",s)}})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[e.jsx(d,{id:"regsistry_number",label:"Registry Number",value:t.register_number,onChange:a=>r("register_number",a.target.value),error:i.register_number}),e.jsx(d,{id:"date_of_registration",label:"Date of Registration",type:"date",value:t.date_of_registration,onChange:a=>r("date_of_registration",a.target.value),error:i.date_of_registration})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[e.jsx(d,{id:"firstname",label:"FirstName",value:t.firstname,onChange:a=>r("firstname",a.target.value),error:i.firstname}),e.jsx(d,{id:"middlename",label:"MiddleName",value:t.middlename,onChange:a=>r("middlename",a.target.value),error:i.middlename})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:e.jsx(d,{id:"lastname",label:"LastName",value:t.lastname,onChange:a=>r("lastname",a.target.value),error:i.lastname})}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t border-gray-200",children:[e.jsx(_,{href:"/death_certificates",children:e.jsx(u,{type:"button",variant:"outline",children:"Cancel"})}),e.jsx(u,{type:"submit",disabled:h,className:"px-6 py-2",children:"Save"})]})]})})})]})};export{K as default};
