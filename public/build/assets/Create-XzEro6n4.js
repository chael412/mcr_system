import{r as l,u as S,j as e,H as C,L as B,a as F}from"./app-C1LH8YTN.js";import{F as n}from"./FormField-BaQce1JE.js";import"./select-BT2KPGQN.js";import{L as o}from"./label-CcBAuEjF.js";import{A as w}from"./AuthenticatedLayout-Ct_8LlJC.js";import{B as p}from"./button-BW-B0I6w.js";import{I as L}from"./input-Bvb0e71I.js";import"./dialog-BKyfVTb2.js";import{S as h}from"./react-select.esm-CkN63WMI.js";import{u as A}from"./useAppUrl-Uhsc8pgn.js";import{C as I}from"./ClipLoader-56jv09u4.js";import"./index-Cqg0mmcb.js";import"./clsx-B-dksMZM.js";const Z=()=>{const x=A(),[H,k]=l.useState([]),[M,R]=l.useState([]),[E,z]=l.useState(""),[b,f]=l.useState(""),[v,j]=l.useState(""),[_,m]=l.useState(!1),{data:t,setData:r,errors:i,processing:y}=S({register_number:"",date_of_registration:"",firstname:"",middlename:"",lastname:"",sex:"",date_birth:"",place_birth:"",file:""}),D=a=>{r("file",a.target.files[0])},N=async a=>{var g;a.preventDefault(),m(!0);const s=new FormData;s.append("firstname",t.firstname),s.append("middlename",t.middlename),s.append("lastname",t.lastname),s.append("sex",t.sex),s.append("date_birth",t.date_birth),s.append("place_birth",t.place_birth),s.append("register_number",t.register_number),s.append("date_of_registration",t.date_of_registration),s.append("file",t.file);try{console.log("Sending Payload:",t);const d=await F.post(`${x}/api/store_birthcertificate`,s,{headers:{"Content-Type":"multipart/form-data"}});(d.status===200||d.status===201)&&setTimeout(()=>{m(!1),alert("Birth certificate record added successfully!"),window.location.reload()},1e3)}catch(d){console.error("Error saving data:",((g=d.response)==null?void 0:g.data)||d)}},c=[{value:"M",label:"Male"},{value:"F",label:"Female"}],u=[{value:"N/A",label:"N/A"},{value:"Bicobian",label:"Bicobian"},{value:"Dibulos",label:"Dibulos"},{value:"Dicambangan",label:"Dicambangan"},{value:"Dicaruyan",label:"Dicaruyan"},{value:"Dicatian",label:"Dicatian"},{value:"Dilakit",label:"Dilakit"},{value:"Dimapnat",label:"Dimapnat"},{value:"Dimapula",label:"Dimapula"},{value:"Dimasalansan",label:"Dimasalansan"},{value:"Dipudo",label:"Dipudo"},{value:"Ditarum",label:"Ditarum"},{value:"Sapinit",label:"Sapinit"}];return e.jsxs(w,{header:e.jsx("h2",{className:"text-xl font-semibold leading-tight text-gray-800",children:"Birth Certificates"}),children:[e.jsx(C,{title:"Birth Certificates"}),_&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:e.jsxs("div",{className:"bg-white px-6 py-4 rounded-lg shadow-md flex items-center space-x-3",children:[e.jsx(I,{size:28,color:"#16a34a"}),e.jsx("span",{className:"text-lg font-semibold text-gray-700",children:"Saving..."})]})}),e.jsx("div",{className:" flex justify-center mb-5",children:e.jsx("div",{className:"border border-gray-400 w-[620px] rounded-md ",children:e.jsxs("form",{onSubmit:N,className:"px-6 py-4 space-y-4",children:[e.jsx("h2",{className:"text-2xl",children:"Add New Birth Certificate"}),e.jsx("hr",{}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:e.jsxs("div",{className:"mt-2",children:[e.jsx(o,{htmlFor:"file",children:"Birth Certificate"}),e.jsx(L,{type:"file",onChange:D})]})}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[e.jsx(n,{id:"regsistry_number",label:"Registry Number",value:t.register_number,onChange:a=>r("register_number",a.target.value),error:i.register_number}),e.jsx(n,{id:"date_of_registration",label:"Date of Registration",type:"date",value:t.date_of_registration,onChange:a=>r("date_of_registration",a.target.value),error:i.date_of_registration})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[e.jsx(n,{id:"firstname",label:"FirstName",value:t.firstname,onChange:a=>r("firstname",a.target.value),error:i.firstname}),e.jsx(n,{id:"middlename",label:"MiddleName",value:t.middlename,onChange:a=>r("middlename",a.target.value),error:i.middlename})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[e.jsx(n,{id:"lastname",label:"LastName",value:t.lastname,onChange:a=>r("lastname",a.target.value),error:i.lastname}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"sex",children:"Sex"}),e.jsx(h,{value:c.find(a=>a.value===b),options:c,onChange:a=>{const s=(a==null?void 0:a.value)||"";f(s),r("sex",s)}})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[e.jsx(n,{id:"date_birth",label:"Date of Birth",type:"date",value:t.date_birth,onChange:a=>r("date_birth",a.target.value),error:i.date_birth}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"place_birth",children:"Barangay"}),e.jsx(h,{value:u.find(a=>a.value===v),options:u,onChange:a=>{const s=(a==null?void 0:a.value)||"";j(s),r("place_birth",s)}})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t border-gray-200",children:[e.jsx(B,{href:"/birth_certificates",children:e.jsx(p,{type:"button",variant:"outline",children:"Cancel"})}),e.jsx(p,{type:"submit",disabled:y,className:"px-6 py-2",children:"Save"})]})]})})})]})};export{Z as default};
