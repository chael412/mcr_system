import{r as i,u as v,j as e,H as N,L as F}from"./app-DvXANNZK.js";import{F as d}from"./FormField-CZ3uG4e7.js";import{B as c}from"./button-xW2c3soG.js";import{L as S}from"./label-Hw_WL7X3.js";import{u as L}from"./useAppUrl-BxHSIUod.js";import{A as B}from"./AuthenticatedLayout-epIY2ifN.js";import{S as C}from"./react-select.esm-DRwnqPkv.js";import"./input-Fsz3NhoV.js";import"./clsx-B-dksMZM.js";import"./index-DuEXUDqE.js";const R=({family_head:r})=>{const g=L(),[u,p]=i.useState([]),[o,x]=i.useState(r.barangay_id.toString()),{data:l,setData:t,patch:y,errors:n,reset:h,processing:f}=v({firstname:r.firstname,middlename:r.middlename||"",lastname:r.lastname,barangay_id:o}),b=async a=>{a.preventDefault(),await y(route("family_heads.update",r.id),{onSuccess:()=>{alert("Family head added successfully!"),window.location.reload(),h()},onError:s=>{console.log(s)}})},j=async()=>{try{const a=await axios.get(`${g}/api/barangay_options`);p(a.data)}catch(a){console.error("Error fetching barangays:",a),alert("Failed to fetch barangays.")}};i.useEffect(()=>{j()},[]);const m=u.map(a=>({value:a.id.toString(),label:a.barangay_name}));return e.jsxs(B,{header:e.jsx("h2",{className:"text-xl font-semibold leading-tight text-gray-800",children:"Family Heads"}),children:[e.jsx(N,{title:"Family Heads"}),e.jsx("div",{className:"flex justify-center mb-5",children:e.jsx("div",{className:"border border-gray-400 w-[620px] rounded-md ",children:e.jsxs("form",{onSubmit:b,className:"px-6 py-4 space-y-4",children:[e.jsx("h2",{className:"text-2xl",children:"Edit Family Head"}),e.jsx("hr",{}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[e.jsx(d,{id:"firstname",label:"FirstName",value:l.firstname,onChange:a=>t("firstname",a.target.value),error:n.firstname}),e.jsx(d,{id:"middlename",label:"MiddleName",value:l.middlename,onChange:a=>t("middlename",a.target.value),error:n.middlename})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[e.jsx(d,{id:"Lastname",label:"LastName",value:l.lastname,onChange:a=>t("lastname",a.target.value),error:n.lastname}),e.jsxs("div",{children:[e.jsx(S,{children:"Barangay"}),e.jsx(C,{options:m,placeholder:"Choose a barangay",isClearable:!0,value:m.find(a=>a.value===o),onChange:a=>{const s=(a==null?void 0:a.value)||"";x(s),t("barangay_id",s?parseInt(s,10):null)},className:`${n.barangay_id?"border border-red-600":""}`})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t border-gray-200",children:[e.jsx(F,{href:"/family_heads",children:e.jsx(c,{type:"button",variant:"outline",children:"Cancel"})}),e.jsx(c,{type:"submit",disabled:f,className:"px-6 py-2",children:"Update"})]})]})})})]})};export{R as default};
