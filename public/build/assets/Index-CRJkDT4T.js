import{j as e,H as v,L as d,a as C}from"./app-DQX9OVmg.js";import{A as D,a as M,C as A,D as P,b as L,c as T,d as k,e as S,f as o}from"./AuthenticatedLayout-C6bU0PmD.js";import{u as $,T as H,a as I,b as l,c as R,d as U,e as r,L as B,f as E}from"./table-DxPR1mAS.js";import{B as x}from"./button-EnwG9Vp5.js";import{I as Q}from"./input-DLoqd4Qu.js";import{u as z}from"./useAppUrl-GuW6x_06.js";import{C as q}from"./ClipLoader-DCdDkyGA.js";import{f as F}from"./format-CBpsKyOP.js";import"./index-CWgjLV9q.js";import"./clsx-B-dksMZM.js";const ae=()=>{var c;const{data:n,isLoading:m,searchQuery:h,setSearchQuery:p,currentPage:u,setCurrentPage:f,sortConfig:i,setSortConfig:g,totalPages:j,totalEntries:b}=$({queryKey:"paginate_marriages",endpoint:"get_marriages"}),y=z(),N=[{key:"register_number",label:"Register Number"},{key:"date_of_registration",label:"Date of Registration"},{key:"husband_lastname",label:"Husband Name"},{key:"wife_lastname",label:"Wife Name"},{key:"place_marriage",label:"Place Marriage"},{key:"",label:"Action"}],w=async a=>{if(window.confirm("Are you sure you want to delete this marriage certificate record?"))try{const s=await C.delete(`${y}/api/delete_marriage/${a}`);alert(s.data.message),window.location.reload()}catch(s){console.error(s),alert("An unexpected error occurred. Please try again later.")}},_=a=>{if(!a){alert("No file uploaded for this record.");return}const t=`${window.location.origin}/${a}`,s=window.open(t,"_blank");s&&(s.onload=()=>s.print())};return e.jsxs(D,{header:e.jsx("h2",{className:"text-xl font-semibold leading-tight text-gray-800",children:"Marriage Certificates"}),children:[e.jsx(v,{title:"Birth Certificates"}),e.jsxs("div",{className:"mx-auto max-w-7xl px-4 mt-5",children:[e.jsx("div",{className:"mb-5 font-semibold",children:e.jsx("h3",{children:"Marriage Certificate Section"})}),e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("div",{className:"flex w-full max-w-md",children:e.jsx(Q,{type:"text",placeholder:"Search by husband or wife lastname...",value:h,onChange:a=>p(a.target.value),className:"w-full p-2 border rounded-md"})}),e.jsx(d,{href:"/marriage_certificates/create",children:e.jsxs(x,{className:"ml-4 ",children:[e.jsx(M,{}),"Add New"]})})]}),e.jsx("div",{className:"h-[480px] overflow-y-auto",children:e.jsxs(H,{children:[e.jsx(I,{children:e.jsx(l,{className:"border-2 ",children:N.map(({key:a,label:t})=>e.jsx(R,{className:"cursor-pointer border-2 py-0 px-2",onClick:()=>g({column:a,direction:i.column===a&&i.direction==="asc"?"desc":"asc"}),children:e.jsxs("span",{className:`flex items-center gap-2 ${i.column===a?"text-blue-600 font-semibold":"text-gray-700"}`,children:[e.jsx("span",{className:"text-md font-bold",children:t}),e.jsx(A,{className:"size-4",color:i.column===a?"#2563eb":"currentColor"})]})},a))})}),e.jsxs(U,{children:[m&&e.jsx(l,{children:e.jsx(r,{colSpan:"5",children:e.jsxs("span",{className:"flex flex-col justify-center items-center py-4 text-green-800",children:["fetching data...",e.jsx(q,{color:"#16a34a",size:42})]})})}),(c=n==null?void 0:n.data)==null?void 0:c.map((a,t)=>e.jsxs(l,{className:"border-2",children:[e.jsx(r,{className:"border-2 py-0 px-2",children:a.register_number??""}),e.jsx(r,{className:"border-2 py-0 px-2",children:a.date_of_registration?F(new Date(a.date_of_registration),"dd-MMM-yyyy").toUpperCase():a.date_of_registration??""}),e.jsxs(r,{className:"border-2 py-0 px-2",children:[a.husband_lastname,","," ",a.husband_firstname," ",a.husband_middlename??""]}),e.jsxs(r,{className:"border-2 py-0 px-2",children:[a.wife_lastname,","," ",a.wife_firstname," ",a.wife_middlename??""]}),e.jsx(r,{className:"border-2 py-0 px-2",children:a.place_marriage??"N/A"}),e.jsx(r,{className:"border-2 py-0 px-2",children:e.jsxs(P,{children:[e.jsx(L,{children:e.jsx(x,{variant:"ghost",className:"hover:bg-green-200",children:e.jsx(B,{color:"#16a34a"})})}),e.jsxs(T,{children:[e.jsx(k,{children:"Action"}),e.jsx(S,{}),e.jsx(o,{onClick:()=>_(a.file),className:"hover:bg-gray-200 cursor-pointer",children:"Print File"}),e.jsx(d,{className:"hover:bg-blue-800 hover:rounded hover:text-white",href:route("marriage_certificates.edit",{id:a.id}),children:e.jsx(o,{className:"hover:bg-gray-200 cursor-pointer",children:"Edit"})}),e.jsx(o,{onClick:()=>w(a.id),className:"hover:bg-gray-200 cursor-pointer",children:"Delete"})]})]})})]},t))]})]})}),e.jsxs("div",{className:"mt-5",children:[e.jsxs("span",{className:"text-sm font-medium",children:[" ",`${b} total entries`]}),e.jsx(E,{currentPage:u,setCurrentPage:f,totalPages:j})]})]})]})};export{ae as default};
