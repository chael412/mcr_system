import{j as e,H as B,L as n,a as P}from"./app-D648RAON.js";import{A as k,a as h,C as S,D as L,b as T,c as U,d as $,e as I,f as o}from"./AuthenticatedLayout-DXOmWgxG.js";import{u as R,T as H,a as E,b as c,c as F,d as Q,e as s,L as z,f as O}from"./table-BOozoRiP.js";import{B as d}from"./button-BIXSl07C.js";import{I as q}from"./input-DN075s_5.js";import{u as K}from"./useAppUrl-DH1satm-.js";import{C as G}from"./ClipLoader-CGRxjuE_.js";import{f as m}from"./format-CBpsKyOP.js";import"./index-DgkJDqXM.js";import"./clsx-B-dksMZM.js";const re=()=>{var u;const[x,p]=useState("All"),{data:t,isLoading:b,searchQuery:f,setSearchQuery:j,currentPage:g,setCurrentPage:y,sortConfig:i,setSortConfig:v,totalPages:N,totalEntries:D}=R({queryKey:["paginate_births",x],endpoint:"get_births"}),w=K();console.log(t);const _=[{key:"register_number",label:"Register Number"},{key:"date_of_registration",label:"Date of Registration"},{key:"lastname",label:"Person Name"},{key:"sex",label:"Sex"},{key:"date_birth",label:"Date of Birth"},{key:"place_birth",label:"Barangay"},{key:"",label:"Action"}];console.log("Member Paginate Data:",t);const C=async a=>{if(window.confirm("Are you sure you want to delete this Birth certificate?"))try{const l=await P.delete(`${w}/api/delete_birth/${a}`);alert(l.data.message),window.location.reload()}catch(l){console.error(l),alert("An unexpected error occurred. Please try again later.")}},A=a=>{const r=`${window.location.origin}/${a}`,l=window.open(r,"_blank");l&&(l.onload=()=>l.print())},M=[{value:"All",label:"All Barangays"},{value:"Bicobian",label:"Bicobian"},{value:"Dibulos",label:"Dibulos"},{value:"Dicambangan",label:"Dicambangan"},{value:"Dicaruyan",label:"Dicaruyan"},{value:"Dicatian",label:"Dicatian"},{value:"Dilakit",label:"Dilakit"},{value:"Dimapnat",label:"Dimapnat"},{value:"Dimapula",label:"Dimapula"},{value:"Dimasalansan",label:"Dimasalansan"},{value:"Dipudo",label:"Dipudo"},{value:"Ditarum",label:"Ditarum"},{value:"Sapinit",label:"Sapinit"},{value:"N/A",label:"N/A"}];return e.jsxs(k,{header:e.jsx("h2",{className:"text-xl font-semibold leading-tight text-gray-800",children:"Birth Certificates"}),children:[e.jsx(B,{title:"Birth Certificates"}),e.jsxs("div",{className:"mx-auto max-w-7xl px-4 mt-5",children:[e.jsx("div",{className:"mb-5 font-semibold",children:e.jsx("h3",{children:"Birth Certificate Section"})}),e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("div",{className:"flex w-full max-w-md",children:e.jsx(q,{type:"text",placeholder:"Search by firstname or lastname...",value:f,onChange:a=>j(a.target.value),className:"w-full p-2 border rounded-md"})}),e.jsx("select",{value:x,onChange:a=>p(a.target.value),className:"ml-4 p-2 border rounded-md",children:M.map(a=>e.jsx("option",{value:a.value,children:a.label},a.value))}),e.jsx(n,{href:"/birth_certificates/create",children:e.jsxs(d,{className:"ml-4 ",children:[e.jsx(h,{}),"Add New"]})})]}),e.jsx(n,{href:"/birth_certificates/create",children:e.jsxs(d,{className:"ml-4 ",children:[e.jsx(h,{}),"Add New"]})})]}),e.jsx("div",{className:"h-[480px] overflow-y-auto",children:e.jsxs(H,{children:[e.jsx(E,{children:e.jsx(c,{className:"border-2 ",children:_.map(({key:a,label:r})=>e.jsx(F,{className:"cursor-pointer border-2 py-0 px-2",onClick:()=>v({column:a,direction:i.column===a&&i.direction==="asc"?"desc":"asc"}),children:e.jsxs("span",{className:`flex items-center gap-2 ${i.column===a?"text-blue-600 font-semibold":"text-gray-700"}`,children:[e.jsx("span",{className:"text-md font-bold",children:r}),e.jsx(S,{className:"size-4",color:i.column===a?"#2563eb":"currentColor"})]})},a))})}),e.jsxs(Q,{children:[b&&e.jsx(c,{children:e.jsx(s,{colSpan:"7",children:e.jsxs("span",{className:"flex flex-col justify-center items-center py-4 text-green-800",children:["fetching data...",e.jsx(G,{color:"#16a34a",size:42})]})})}),(u=t==null?void 0:t.data)==null?void 0:u.map((a,r)=>e.jsxs(c,{className:"border-2",children:[e.jsx(s,{className:"border-2 py-0 px-2",children:a.register_number??""}),e.jsx(s,{className:"border-2 py-0 px-2",children:a.date_of_registration?m(new Date(a.date_of_registration),"dd-MMM-yyyy").toUpperCase():a.date_of_registration??""}),e.jsxs(s,{className:"border-2 py-0 px-2",children:[a.lastname,", ",a.firstname," ",a.middlename??""]}),e.jsx(s,{className:"border-2 py-0 px-2",children:a.sex}),e.jsx(s,{className:"border-2 py-0 px-2",children:a.date_birth?m(new Date(a.date_birth),"dd-MMM-yyyy").toUpperCase():"n/a"}),e.jsx(s,{className:"border-2 py-0 px-2",children:a.place_birth??"n/a"}),e.jsx(s,{className:"border-2 py-0 px-2",children:e.jsxs(L,{children:[e.jsx(T,{children:e.jsx(d,{variant:"ghost",className:"hover:bg-green-200",children:e.jsx(z,{color:"#16a34a"})})}),e.jsxs(U,{children:[e.jsx($,{children:"Action"}),e.jsx(I,{}),e.jsx(o,{onClick:()=>A(a.file),className:"hover:bg-gray-200 cursor-pointer",children:"Print File"}),e.jsx(n,{className:"hover:bg-blue-800 hover:rounded hover:text-white",href:route("birth_certificates.edit",{id:a.id}),children:e.jsx(o,{className:"hover:bg-gray-200 cursor-pointer",children:"Edit"})}),e.jsx(o,{onClick:()=>C(a.id),className:"hover:bg-gray-200 cursor-pointer",children:"Delete"})]})]})})]},r))]})]})}),e.jsxs("div",{className:"mt-5",children:[e.jsxs("span",{className:"text-sm font-medium",children:[" ",`${D} total entries`]}),e.jsx(O,{currentPage:g,setCurrentPage:y,totalPages:N})]})]})]})};export{re as default};
