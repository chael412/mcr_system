import{j as e,H as v,L as d,a as D}from"./app-BWl-75dw.js";import{A as M,a as P,C as A,D as L,b as T,c as B,d as k,e as S,f as n}from"./AuthenticatedLayout-hSsqpmE3.js";import{u as U,T as $,a as I,b as l,c as R,d as H,e as r,C as E,L as Q,f as z}from"./table-BwWJb61K.js";import{B as x}from"./button-C-_uUHk6.js";import{I as q}from"./input-BJQ5SP4M.js";import{u as F}from"./useAppUrl-CY32mY0y.js";import{f as h}from"./format-CBpsKyOP.js";import"./index-Cer8hWdz.js";import"./clsx-B-dksMZM.js";const ee=()=>{var c;const{data:o,isLoading:m,searchQuery:p,setSearchQuery:u,currentPage:f,setCurrentPage:j,sortConfig:i,setSortConfig:g,totalPages:b,totalEntries:y}=U({queryKey:"paginate_births",endpoint:"get_births"}),N=F();console.log(o);const w=[{key:"register_number",label:"Register Number"},{key:"date_of_registration",label:"Date of Registration"},{key:"lastname",label:"Person Name"},{key:"sex",label:"Sex"},{key:"date_birthdate",label:"Place Birthdate"},{key:"",label:"Action"}];console.log("Member Paginate Data:",o);const _=async s=>{if(window.confirm("Are you sure you want to delete this Birth certificate?"))try{const a=await D.delete(`${N}/api/delete_birth/${s}`);alert(a.data.message),window.location.reload()}catch(a){console.error(a),alert("An unexpected error occurred. Please try again later.")}},C=s=>{const t=`${window.location.origin}/${s}`,a=window.open(t,"_blank");a&&(a.onload=()=>a.print())};return e.jsxs(M,{header:e.jsx("h2",{className:"text-xl font-semibold leading-tight text-gray-800",children:"Birth Certificates"}),children:[e.jsx(v,{title:"Birth Certificates"}),e.jsxs("div",{className:"mx-auto max-w-7xl px-4 mt-5",children:[e.jsx("div",{className:"mb-5 font-semibold",children:e.jsx("h3",{children:"Birth Certificate Section"})}),e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("div",{className:"flex w-full max-w-md",children:e.jsx(q,{type:"text",placeholder:"Search by lastname...",value:p,onChange:s=>u(s.target.value),className:"w-full p-2 border rounded-md"})}),e.jsx(d,{href:"/birth_certificates/create",children:e.jsxs(x,{className:"ml-4 ",children:[e.jsx(P,{}),"Add New"]})})]}),e.jsx("div",{className:"h-[480px] overflow-y-auto",children:e.jsxs($,{children:[e.jsx(I,{children:e.jsx(l,{className:"border-2 ",children:w.map(({key:s,label:t})=>e.jsx(R,{className:"cursor-pointer border-2 py-0 px-2",onClick:()=>g({column:s,direction:i.column===s&&i.direction==="asc"?"desc":"asc"}),children:e.jsxs("span",{className:`flex items-center gap-2 ${i.column===s?"text-blue-600 font-semibold":"text-gray-700"}`,children:[e.jsx("span",{className:"text-md font-bold",children:t}),e.jsx(A,{className:"size-4",color:i.column===s?"#2563eb":"currentColor"})]})},s))})}),e.jsxs(H,{children:[m&&e.jsx(l,{children:e.jsx(r,{colSpan:"5",children:e.jsxs("span",{className:"flex flex-col justify-center items-center py-4 text-green-800",children:["fetching data...",e.jsx(E,{color:"#16a34a",size:42})]})})}),(c=o==null?void 0:o.data)==null?void 0:c.map((s,t)=>e.jsxs(l,{className:"border-2",children:[e.jsx(r,{className:"border-2 py-0 px-2",children:s.register_number??""}),e.jsx(r,{className:"border-2 py-0 px-2",children:s.date_of_registration?h(new Date(s.date_of_registration),"dd-MMM-yyyy").toUpperCase():s.date_of_registration??""}),e.jsxs(r,{className:"border-2 py-0 px-2",children:[s.lastname,", ",s.firstname," ",s.middlename??""]}),e.jsx(r,{className:"border-2 py-0 px-2",children:s.sex}),e.jsx(r,{className:"border-2 py-0 px-2",children:s.date_birth?h(new Date(s.date_birth),"dd-MMM-yyyy").toUpperCase():"n/a"}),e.jsx(r,{className:"border-2 py-0 px-2",children:e.jsxs(L,{children:[e.jsx(T,{children:e.jsx(x,{variant:"ghost",className:"hover:bg-green-200",children:e.jsx(Q,{color:"#16a34a"})})}),e.jsxs(B,{children:[e.jsx(k,{children:"Action"}),e.jsx(S,{}),e.jsx(n,{onClick:()=>C(s.file),className:"hover:bg-gray-200 cursor-pointer",children:"Print File"}),e.jsx(d,{className:"hover:bg-blue-800 hover:rounded hover:text-white",href:route("birth_certificates.edit",{id:s.id}),children:e.jsx(n,{className:"hover:bg-gray-200 cursor-pointer",children:"Edit"})}),e.jsx(n,{onClick:()=>_(s.id),className:"hover:bg-gray-200 cursor-pointer",children:"Delete"})]})]})})]},t))]})]})}),e.jsxs("div",{className:"mt-5",children:[e.jsxs("span",{className:"text-sm font-medium",children:[" ",`${y} total entries`]}),e.jsx(z,{currentPage:f,setCurrentPage:j,totalPages:b})]})]})]})};export{ee as default};
