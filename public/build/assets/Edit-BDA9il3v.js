import{r as i,u as v,j as e,H as N,L as F}from"./app-DQX9OVmg.js";import{F as d,S}from"./react-select.esm-BQiTxtTb.js";import{B as c}from"./button-EnwG9Vp5.js";import{L}from"./label-D9D_Y8Mz.js";import{u as B}from"./useAppUrl-GuW6x_06.js";import{A as C}from"./AuthenticatedLayout-C6bU0PmD.js";import"./input-DLoqd4Qu.js";import"./clsx-B-dksMZM.js";import"./index-CWgjLV9q.js";const M=({family_head:s})=>{const g=B(),[u,x]=i.useState([]),[o,p]=i.useState(s.barangay_id.toString()),{data:l,setData:t,patch:y,errors:n,reset:h,processing:b}=v({firstname:s.firstname,middlename:s.middlename||"",lastname:s.lastname,barangay_id:o}),f=async a=>{a.preventDefault(),await y(route("family_heads.update",s.id),{onSuccess:()=>{alert("Family head added successfully!"),window.location.reload(),h()},onError:r=>{console.log(r)}})},j=async()=>{try{const a=await axios.get(`${g}/api/barangay_options`);x(a.data)}catch(a){console.error("Error fetching barangays:",a),alert("Failed to fetch barangays.")}};i.useEffect(()=>{j()},[]);const m=u.map(a=>({value:a.id.toString(),label:a.barangay_name}));return e.jsxs(C,{header:e.jsx("h2",{className:"text-xl font-semibold leading-tight text-gray-800",children:"Family Heads"}),children:[e.jsx(N,{title:"Family Heads"}),e.jsx("div",{className:"flex justify-center mb-5",children:e.jsx("div",{className:"border border-gray-400 w-[620px] rounded-md ",children:e.jsxs("form",{onSubmit:f,className:"px-6 py-4 space-y-4",children:[e.jsx("h2",{className:"text-2xl",children:"Edit Family Head"}),e.jsx("hr",{}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[e.jsx(d,{id:"firstname",label:"FirstName",value:l.firstname,onChange:a=>t("firstname",a.target.value),error:n.firstname}),e.jsx(d,{id:"middlename",label:"MiddleName",value:l.middlename,onChange:a=>t("middlename",a.target.value),error:n.middlename})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[e.jsx(d,{id:"Lastname",label:"LastName",value:l.lastname,onChange:a=>t("lastname",a.target.value),error:n.lastname}),e.jsxs("div",{children:[e.jsx(L,{children:"Barangay"}),e.jsx(S,{options:m,placeholder:"Choose a barangay",isClearable:!0,value:m.find(a=>a.value===o),onChange:a=>{const r=(a==null?void 0:a.value)||"";p(r),t("barangay_id",r?parseInt(r,10):null)},className:`${n.barangay_id?"border border-red-600":""}`})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t border-gray-200",children:[e.jsx(F,{href:"/family_heads",children:e.jsx(c,{type:"button",variant:"outline",children:"Cancel"})}),e.jsx(c,{type:"submit",disabled:b,className:"px-6 py-2",children:"Update"})]})]})})})]})};export{M as default};
