import{r as i,u as f,j as a,H as b,L as j}from"./app-DQX9OVmg.js";import{F as l,S as v}from"./react-select.esm-BQiTxtTb.js";import{B as d}from"./button-EnwG9Vp5.js";import{L as N}from"./label-D9D_Y8Mz.js";import{u as _}from"./useAppUrl-GuW6x_06.js";import{A as F}from"./AuthenticatedLayout-C6bU0PmD.js";import"./input-DLoqd4Qu.js";import"./clsx-B-dksMZM.js";import"./index-CWgjLV9q.js";const D=()=>{const o=_(),[m,c]=i.useState([]),{data:s,setData:r,post:g,errors:t,reset:u,processing:x}=f({firstname:"",middlename:"",lastname:"",barangay_id:""}),p=async e=>{e.preventDefault(),await g(route("family_heads.store"),{onSuccess:()=>{alert("Family head added successfully!"),u()},onError:y=>{console.log(y)}})},h=async()=>{try{const e=await axios.get(`${o}/api/barangay_options`);c(e.data)}catch(e){console.error("Error fetching barangays:",e),alert("Failed to fetch barangays.")}};i.useEffect(()=>{h()},[]);const n=m.map(e=>({value:e.id.toString(),label:e.barangay_name}));return a.jsxs(F,{header:a.jsx("h2",{className:"text-xl font-semibold leading-tight text-gray-800",children:"Family Heads"}),children:[a.jsx(b,{title:"Family Heads"}),a.jsx("div",{className:"flex justify-center mb-5",children:a.jsx("div",{className:"border border-gray-400 w-[620px] rounded-md ",children:a.jsxs("form",{onSubmit:p,className:"px-6 py-4 space-y-4",children:[a.jsx("h2",{className:"text-2xl",children:"Add Family Head"}),a.jsx("hr",{}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[a.jsx(l,{id:"firstname",label:"FirstName",value:s.firstname,onChange:e=>r("firstname",e.target.value),error:t.firstname}),a.jsx(l,{id:"middlename",label:"MiddleName",value:s.middlename,onChange:e=>r("middlename",e.target.value),error:t.middlename})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[a.jsx(l,{id:"Lastname",label:"LastName",value:s.lastname,onChange:e=>r("lastname",e.target.value),error:t.lastname}),a.jsxs("div",{children:[a.jsx(N,{children:"Barangay"}),a.jsx(v,{options:n,placeholder:"Choose a barangay",isClearable:!0,value:n.find(e=>e.value===s.barangay_id),onChange:e=>r("barangay_id",e?e.value:""),className:`${t.barangay_id?"border border-red-600":""}`})]})]}),a.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t border-gray-200",children:[a.jsx(j,{href:"/family_heads",children:a.jsx(d,{type:"button",variant:"outline",children:"Cancel"})}),a.jsx(d,{type:"submit",disabled:x,className:"px-6 py-2",children:"Save"})]})]})})})]})};export{D as default};
