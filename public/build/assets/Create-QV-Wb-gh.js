import{r as i,u as B,j as e,H as L,L as w,a as I}from"./app-BqRBQcJ9.js";import{S as m,F as n}from"./react-select.esm-BwB4fMHA.js";import"./select-BhDDVGkp.js";import{L as o}from"./label-Fx_rsG_Q.js";import{A}from"./AuthenticatedLayout-5oaBSj-P.js";import{B as x}from"./button-C9epaQ9w.js";import{I as k}from"./input-C_EZNZ2N.js";import"./dialog-slnNCvAX.js";import{u as H}from"./useAppUrl-B7r_fl3A.js";import{C as R}from"./ClipLoader-DSfYtAUs.js";import"./index-JhQEQJfU.js";import"./clsx-B-dksMZM.js";const ee=()=>{const b=H(),[M,E]=i.useState([]),[z,P]=i.useState([]),[T,U]=i.useState(""),[f,v]=i.useState(""),[j,_]=i.useState(""),[y,S]=i.useState(""),[D,c]=i.useState(!1),{data:s,setData:r,errors:l,processing:N}=B({register_number:"",date_of_registration:"",firstname:"",middlename:"",lastname:"",sex:"",date_birth:"",place_birth:"",status:"",file:""}),C=a=>{r("file",a.target.files[0])},F=async a=>{var h;a.preventDefault(),c(!0);const t=new FormData;t.append("firstname",s.firstname),t.append("middlename",s.middlename),t.append("lastname",s.lastname),t.append("sex",s.sex),t.append("date_birth",s.date_birth),t.append("place_birth",s.place_birth),t.append("register_number",s.register_number),t.append("date_of_registration",s.date_of_registration),t.append("status",s.status),t.append("file",s.file);try{console.log("Sending Payload:",s);const d=await I.post(`${b}/api/store_birthcertificate`,t,{headers:{"Content-Type":"multipart/form-data"}});(d.status===200||d.status===201)&&setTimeout(()=>{c(!1),alert("Birth certificate record added successfully!"),window.location.reload()},1e3)}catch(d){console.error("Error saving data:",((h=d.response)==null?void 0:h.data)||d)}},u=[{value:"M",label:"Male"},{value:"F",label:"Female"}],g=[{value:"Legitimate",label:"Legitimate"},{value:"Illegitimate",label:"Illegitimate"}],p=[{value:"N/A",label:"N/A"},{value:"Bicobian",label:"Bicobian"},{value:"Dibulos",label:"Dibulos"},{value:"Dicambangan",label:"Dicambangan"},{value:"Dicaruyan",label:"Dicaruyan"},{value:"Dicatian",label:"Dicatian"},{value:"Dilakit",label:"Dilakit"},{value:"Dimapnat",label:"Dimapnat"},{value:"Dimapula",label:"Dimapula"},{value:"Dimasalansan",label:"Dimasalansan"},{value:"Dipudo",label:"Dipudo"},{value:"Ditarum",label:"Ditarum"},{value:"Sapinit",label:"Sapinit"}];return e.jsxs(A,{header:e.jsx("h2",{className:"text-xl font-semibold leading-tight text-gray-800",children:"Birth Certificates"}),children:[e.jsx(L,{title:"Birth Certificates"}),D&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:e.jsxs("div",{className:"bg-white px-6 py-4 rounded-lg shadow-md flex items-center space-x-3",children:[e.jsx(R,{size:28,color:"#16a34a"}),e.jsx("span",{className:"text-lg font-semibold text-gray-700",children:"Saving..."})]})}),e.jsx("div",{className:" flex justify-center mb-5",children:e.jsx("div",{className:"border border-gray-400 w-[620px] rounded-md ",children:e.jsxs("form",{onSubmit:F,className:"px-6 py-4 space-y-4",children:[e.jsx("h2",{className:"text-2xl",children:"Add New Birth Certificate"}),e.jsx("hr",{}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"mt-2",children:[e.jsx(o,{htmlFor:"file",children:"Birth Certificate"}),e.jsx(k,{type:"file",onChange:C})]}),e.jsxs("div",{className:"mt-2",children:[e.jsx(o,{htmlFor:"status",children:"Remarks"}),e.jsx(m,{value:g.find(a=>a.value===j),options:g,onChange:a=>{const t=(a==null?void 0:a.value)||"";_(t),r("status",t)}})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[e.jsx(n,{id:"regsistry_number",label:"Registry Number",value:s.register_number,onChange:a=>r("register_number",a.target.value),error:l.register_number}),e.jsx(n,{id:"date_of_registration",label:"Date of Registration",type:"date",value:s.date_of_registration,onChange:a=>r("date_of_registration",a.target.value),error:l.date_of_registration})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[e.jsx(n,{id:"firstname",label:"FirstName",value:s.firstname,onChange:a=>r("firstname",a.target.value),error:l.firstname}),e.jsx(n,{id:"middlename",label:"MiddleName",value:s.middlename,onChange:a=>r("middlename",a.target.value),error:l.middlename})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[e.jsx(n,{id:"lastname",label:"LastName",value:s.lastname,onChange:a=>r("lastname",a.target.value),error:l.lastname}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"sex",children:"Sex"}),e.jsx(m,{value:u.find(a=>a.value===f),options:u,onChange:a=>{const t=(a==null?void 0:a.value)||"";v(t),r("sex",t)}})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[e.jsx(n,{id:"date_birth",label:"Date of Birth",type:"date",value:s.date_birth,onChange:a=>r("date_birth",a.target.value),error:l.date_birth}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"place_birth",children:"Barangay"}),e.jsx(m,{value:p.find(a=>a.value===y),options:p,onChange:a=>{const t=(a==null?void 0:a.value)||"";S(t),r("place_birth",t)}})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t border-gray-200",children:[e.jsx(w,{href:"/birth_certificates",children:e.jsx(x,{type:"button",variant:"outline",children:"Cancel"})}),e.jsx(x,{type:"submit",disabled:N,className:"px-6 py-2",children:"Save"})]})]})})})]})};export{ee as default};
