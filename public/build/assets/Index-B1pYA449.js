import{j as e,H as v,L as i,a as D}from"./app-CRU64USE.js";import{A as _,a as C,C as M,D as A,b as P,c as L,d as T,e as S,f as n}from"./AuthenticatedLayout-BTN5h9xj.js";import{u as I,T as R,a as H,b as c,c as U,d as $,e as r,C as k,L as B,f as E}from"./table-DIFmnDRr.js";import{B as h}from"./button-WzRRCGJ9.js";import{I as Q}from"./input-Bk3f_ITX.js";import{u as z}from"./useAppUrl-BnoHi0u7.js";import{f as q}from"./format-CBpsKyOP.js";import"./index-BRPDYfqu.js";import"./clsx-B-dksMZM.js";const Z=()=>{var d;const{data:a,isLoading:x,searchQuery:m,setSearchQuery:u,currentPage:p,setCurrentPage:f,sortConfig:t,setSortConfig:j,totalPages:g,totalEntries:b}=I({queryKey:"paginate_deaths",endpoint:"get_deaths"}),y=z();console.log(a);const N=[{key:"register_number",label:"Register Number"},{key:"date_of_registration",label:"Date of Registration"},{key:"lastname",label:"Person Name"},{key:"",label:"Action"}];console.log("Member Paginate Data:",a);const w=async s=>{if(window.confirm("Are you sure you want to delete this death certificate record?"))try{const l=await D.delete(`${y}/api/delete_death/${s}`);alert(l.data.message),window.location.reload()}catch(l){console.error(l),alert("An unexpected error occurred. Please try again later.")}};return e.jsxs(_,{header:e.jsx("h2",{className:"text-xl font-semibold leading-tight text-gray-800",children:"Death Certificates"}),children:[e.jsx(v,{title:"Death Certificates"}),e.jsxs("div",{className:"mx-auto max-w-7xl px-4 mt-5",children:[e.jsx("div",{className:"mb-5 font-semibold",children:e.jsx("h3",{children:"Death Certificate Section"})}),e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("div",{className:"flex w-full max-w-md",children:e.jsx(Q,{type:"text",placeholder:"Search by lastname...",value:m,onChange:s=>u(s.target.value),className:"w-full p-2 border rounded-md"})}),e.jsx(i,{href:"/death_certificates/create",children:e.jsxs(h,{className:"ml-4 ",children:[e.jsx(C,{}),"Add New"]})})]}),e.jsx("div",{className:"h-[480px] overflow-y-auto",children:e.jsxs(R,{children:[e.jsx(H,{children:e.jsx(c,{className:"border-2 ",children:N.map(({key:s,label:o})=>e.jsx(U,{className:"cursor-pointer border-2 py-0 px-2",onClick:()=>j({column:s,direction:t.column===s&&t.direction==="asc"?"desc":"asc"}),children:e.jsxs("span",{className:`flex items-center gap-2 ${t.column===s?"text-blue-600 font-semibold":"text-gray-700"}`,children:[e.jsx("span",{className:"text-md font-bold",children:o}),e.jsx(M,{className:"size-4",color:t.column===s?"#2563eb":"currentColor"})]})},s))})}),e.jsxs($,{children:[x&&e.jsx(c,{children:e.jsx(r,{colSpan:"5",children:e.jsxs("span",{className:"flex flex-col justify-center items-center py-4 text-green-800",children:["fetching data...",e.jsx(k,{color:"#16a34a",size:42})]})})}),(d=a==null?void 0:a.data)==null?void 0:d.map((s,o)=>e.jsxs(c,{className:"border-2",children:[e.jsx(r,{className:"border-2 py-0 px-2",children:s.register_number??""}),e.jsx(r,{className:"border-2 py-0 px-2",children:s.date_of_registration?q(new Date(s.date_of_registration),"dd-MMM-yyyy").toUpperCase():s.date_of_registration??""}),e.jsxs(r,{className:"border-2 py-0 px-2",children:[s.lastname,", ",s.firstname," ",s.middlename??""]}),e.jsx(r,{className:"border-2 py-0 px-2",children:e.jsxs(A,{children:[e.jsx(P,{children:e.jsx(h,{variant:"ghost",className:"hover:bg-green-200",children:e.jsx(B,{color:"#16a34a"})})}),e.jsxs(L,{children:[e.jsx(T,{children:"Action"}),e.jsx(S,{}),e.jsx(i,{className:"hover:bg-blue-800 hover:rounded hover:text-white",href:route("death_certificates.show",{id:s.id}),children:e.jsx(n,{className:"hover:bg-gray-200 cursor-pointer",children:"View Details"})}),e.jsx(i,{className:"hover:bg-blue-800 hover:rounded hover:text-white",href:route("death_certificates.edit",{id:s.id}),children:e.jsx(n,{className:"hover:bg-gray-200 cursor-pointer",children:"Edit"})}),e.jsx(n,{onClick:()=>w(s.id),className:"hover:bg-gray-200 cursor-pointer",children:"Delete"})]})]})})]},o))]})]})}),e.jsxs("div",{className:"mt-5",children:[e.jsxs("span",{className:"text-sm font-medium",children:[" ",`${b} total entries`]}),e.jsx(E,{currentPage:p,setCurrentPage:f,totalPages:g})]})]})]})};export{Z as default};
