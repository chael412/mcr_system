import{r as o,u as _,j as e,H as j,L as b,a as v}from"./app-DuqfG2yO.js";import{F as l}from"./FormField-BaCHv0q4.js";import"./select-C3p87T4-.js";import{L as y}from"./label-BTKFh1_o.js";import{A as N}from"./AuthenticatedLayout-CW1viDj1.js";import{B as c}from"./button-y16t9HT4.js";import{I as C}from"./input-tI7_0VzK.js";import"./dialog-CNjlfbx2.js";import{u as D}from"./useAppUrl-DgigPi0m.js";import"./index-Djf6MPph.js";import"./clsx-B-dksMZM.js";const q=({death:r})=>{const p=D(),g=r.id,[F,L]=o.useState([]),[w,f]=o.useState(""),{data:t,setData:s,errors:n,processing:u}=_({firstname:r.firstname,middlename:r.middlename,lastname:r.lastname,register_number:r.register_number,date_of_registration:r.date_of_registration,file:""});o.useEffect(()=>{f(r.sex||""),s("sex",r.sex||"")},[r.sex]);const x=a=>{s("file",a.target.files[0])},h=async a=>{var m;a.preventDefault();const i=new FormData;i.append("firstname",t.firstname),i.append("middlename",t.middlename),i.append("lastname",t.lastname),i.append("register_number",t.register_number),i.append("date_of_registration",t.date_of_registration),i.append("file",t.file);try{const d=await await v.post(`${p}/api/update_deathcertificate/${g}`,i,{headers:{"X-Requested-With":"XMLHttpRequest","Content-Type":"multipart/form-data","X-HTTP-Method-Override":"PUT"}});(d.status===200||d.status===201)&&(alert("Death certificate record updated successfully!"),window.location.reload())}catch(d){console.error("Error updating data:",((m=d.response)==null?void 0:m.data)||d)}};return e.jsxs(N,{header:e.jsx("h2",{className:"text-xl font-semibold leading-tight text-gray-800",children:"Death Certificates"}),children:[e.jsx(j,{title:"Death Certificates"}),e.jsx("div",{className:" flex justify-center mb-5",children:e.jsx("div",{className:"border border-gray-400 w-[620px] rounded-md ",children:e.jsxs("form",{onSubmit:h,className:"px-6 py-4 space-y-4",children:[e.jsx("h2",{className:"text-2xl",children:"Edit Death Certificate"}),e.jsx("hr",{}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:e.jsxs("div",{className:"mt-2",children:[e.jsx(y,{htmlFor:"file",children:"File"}),e.jsx(C,{type:"file",onChange:x})]})}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[e.jsx(l,{id:"regsistry_number",label:"Registry Number",value:t.register_number,onChange:a=>s("register_number",a.target.value),error:n.register_number}),e.jsx(l,{id:"date_of_registration",label:"Date of Registration",type:"date",value:t.date_of_registration,onChange:a=>s("date_of_registration",a.target.value),error:n.date_of_registration})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[e.jsx(l,{id:"firstname",label:"FirstName",value:t.firstname,onChange:a=>s("firstname",a.target.value),error:n.firstname}),e.jsx(l,{id:"middlename",label:"MiddleName",value:t.middlename,onChange:a=>s("middlename",a.target.value),error:n.middlename})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:e.jsx(l,{id:"lastname",label:"LastName",value:t.lastname,onChange:a=>s("lastname",a.target.value),error:n.lastname})}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t border-gray-200",children:[e.jsx(b,{href:"/death_certificates",children:e.jsx(c,{type:"button",variant:"outline",children:"Cancel"})}),e.jsx(c,{type:"submit",disabled:u,className:"px-6 py-2",children:"Update changes"})]})]})})})]})};export{q as default};
