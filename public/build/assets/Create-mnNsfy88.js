import{r as l,u,j as e,H as x,L as h,a as j}from"./app-CRU64USE.js";import{F as n}from"./FormField-CuEPFVMf.js";import"./select-CFAQgOG8.js";import{L as _}from"./label-zVbspt_4.js";import{A as b}from"./AuthenticatedLayout-BTN5h9xj.js";import{B as m}from"./button-WzRRCGJ9.js";import{I as y}from"./input-Bk3f_ITX.js";import"./dialog-C2L1u1iV.js";import{u as v}from"./useAppUrl-BnoHi0u7.js";import"./index-BRPDYfqu.js";import"./clsx-B-dksMZM.js";const q=()=>{const c=v(),[N,C]=l.useState([]),[F,S]=l.useState([]),[D,L]=l.useState(""),[w,A]=l.useState(""),{data:t,setData:s,errors:i,processing:g}=u({register_number:"",date_of_registration:"",firstname:"",middlename:"",lastname:"",file:""}),p=a=>{s("file",a.target.files[0])},f=async a=>{var o;a.preventDefault();const r=new FormData;r.append("firstname",t.firstname),r.append("middlename",t.middlename),r.append("lastname",t.lastname),r.append("register_number",t.register_number),r.append("date_of_registration",t.date_of_registration),r.append("file",t.file);try{console.log("Sending Payload:",t);const d=await j.post(`${c}/api/store_deathcertificate`,r,{headers:{"Content-Type":"multipart/form-data"}});(d.status===200||d.status===201)&&(alert("Death certificate record added successfully!"),window.location.reload())}catch(d){console.error("Error saving data:",((o=d.response)==null?void 0:o.data)||d)}};return e.jsxs(b,{header:e.jsx("h2",{className:"text-xl font-semibold leading-tight text-gray-800",children:"Death Certificates"}),children:[e.jsx(x,{title:"Death Certificates"}),e.jsx("div",{className:" flex justify-center mb-5",children:e.jsx("div",{className:"border border-gray-400 w-[620px] rounded-md ",children:e.jsxs("form",{onSubmit:f,className:"px-6 py-4 space-y-4",children:[e.jsx("h2",{className:"text-2xl",children:"Add New Death Certificate"}),e.jsx("hr",{}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:e.jsxs("div",{className:"mt-2",children:[e.jsx(_,{htmlFor:"file",children:"File"}),e.jsx(y,{type:"file",onChange:p})]})}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[e.jsx(n,{id:"regsistry_number",label:"Registry Number",value:t.register_number,onChange:a=>s("register_number",a.target.value),error:i.register_number}),e.jsx(n,{id:"date_of_registration",label:"Date of Registration",type:"date",value:t.date_of_registration,onChange:a=>s("date_of_registration",a.target.value),error:i.date_of_registration})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[e.jsx(n,{id:"firstname",label:"FirstName",value:t.firstname,onChange:a=>s("firstname",a.target.value),error:i.firstname}),e.jsx(n,{id:"middlename",label:"MiddleName",value:t.middlename,onChange:a=>s("middlename",a.target.value),error:i.middlename})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:e.jsx(n,{id:"lastname",label:"LastName",value:t.lastname,onChange:a=>s("lastname",a.target.value),error:i.lastname})}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t border-gray-200",children:[e.jsx(h,{href:"/death_certificates",children:e.jsx(m,{type:"button",variant:"outline",children:"Cancel"})}),e.jsx(m,{type:"submit",disabled:g,className:"px-6 py-2",children:"Save"})]})]})})})]})};export{q as default};
